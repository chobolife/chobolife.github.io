<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.5 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ko" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Jekyll의 Minimal mistakes 테마에서 HTML 압축하기 - 우당탕탕 초보라이프</title>
<meta name="description" content="Jekyll로 웹사이트를 만드는 것은 아주 만족스러웠다.그리고 처음에는 이 블로그에서 시작했지만, 다른 사이트도 만들어보고 싶은 욕심이 생겨서 조금 해 보고 있다.">



<meta property="og:type" content="article">
<meta property="og:locale" content="ko">
<meta property="og:site_name" content="우당탕탕 초보라이프">
<meta property="og:title" content="Jekyll의 Minimal mistakes 테마에서 HTML 압축하기">
<meta property="og:url" content="https://chobolife.github.io/blog/2019/08/17/jekyll-compress/">


  <meta property="og:description" content="Jekyll로 웹사이트를 만드는 것은 아주 만족스러웠다.그리고 처음에는 이 블로그에서 시작했지만, 다른 사이트도 만들어보고 싶은 욕심이 생겨서 조금 해 보고 있다.">







  <meta property="article:published_time" content="2019-08-17T14:38:00+09:00">






<link rel="canonical" href="https://chobolife.github.io/blog/2019/08/17/jekyll-compress/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "chobolife",
      "url": "https://chobolife.github.io",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="우당탕탕 초보라이프 Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          우당탕탕 초보라이프
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/tags/" >Tags</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" >About</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">토글 메뉴</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Jekyll의 Minimal mistakes 테마에서 HTML 압축하기">
    <meta itemprop="description" content="Jekyll로 웹사이트를 만드는 것은 아주 만족스러웠다.그리고 처음에는 이 블로그에서 시작했지만, 다른 사이트도 만들어보고 싶은 욕심이 생겨서 조금 해 보고 있다.">
    <meta itemprop="datePublished" content="August 17, 2019">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Jekyll의 Minimal mistakes 테마에서 HTML 압축하기
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>Jekyll로 웹사이트를 만드는 것은 아주 만족스러웠다.
그리고 처음에는 이 블로그에서 시작했지만, 다른 사이트도 만들어보고 싶은 욕심이 생겨서 조금 해 보고 있다.</p>

<h2 id="html-압축이-필요한-이유">HTML 압축이 필요한 이유</h2>
<p>그런데 마크다운에서 HTML로 변환이 완료된 파일을 열어 보면 조금 마음에 안 들었다.
아래는 지난 포스팅(<a href="/blog/2019/08/16/jekyll-disqus/">Jekyll에 disqus 연동하기</a>)의 html 파일을 열어 본 것이다.</p>

<figure>
  <img src="https://drive.google.com/uc?id=1ztwSEgFRpVY6jX9GOuCj3VqmI8fJtPnI" alt="Jekyll로 생성한 HTML 파일에 줄바꿈이 많이 들어 간 모습이다." title="Jekyll로 생성한 HTML 파일의 예 1" style="border:1px solid #ccc0bd; " />
  <figcaption>Jekyll로 생성한 HTML 파일에 줄바꿈이 많이 들어 간 모습이다.</figcaption>
</figure>

<p>맨 윗 부분에 너무 많은 blank line이 있다.
이것을 Jekyll의 layout 파일이나 include 파일을 따라가 보았는데, 그곳에서 줄이려면 굉장히 많은 수작업이 필요할 뿐 아니라 매우 비효율적일 것 같았다.
비효율적이라고 생각하는 이유는 그 소스코드에는 가독성을 위해 그 나름대로의 행바꿈이나 탭 등이 삽입되어 있는 것이기 때문이다.
그것을 layout 파일 또는 include 파일에서 삭제하는 것은 별로 내키는 방법이 아니다.</p>

<p>포스트의 아랫 부분에는 태그가 나열되는 부분도 있는데 그 곳의 html 코드는 아래와 같다.</p>

<figure>
  <img src="https://drive.google.com/uc?id=1ZHxzFBGctUDdDxlD2IK2vmyKgWqsgFhL" alt="줄바꿈 뿐 아니라 공백도 많이 포함되어 있다. 이는 layout, include 등에 포함된 공백이 HTML로 그대로 옮겨지기 때문이다." title="Jekyll로 생성한 HTML 파일의 예 2" style="border:1px solid #ccc0bd; " />
  <figcaption>줄바꿈 뿐 아니라 공백도 많이 포함되어 있다. 이는 layout, include 등에 포함된 공백이 HTML로 그대로 옮겨지기 때문이다.</figcaption>
</figure>

<p>빈 줄도 문제지만, 쓸데없는 공백이 매우 많이 삽입되어 있다.
이 html 파일의 크기는 25,383 byte이다.</p>

<p>물론 HTML 파일이 그 자체로 보여질 일은 거의 없다.
특별히 누군가 <em>‘이 웹페이지는 어떻게 구성되어 있는가?’</em> 라는 의문을 갖고 코드를 열어본다면 모르겠지만, 일반적인 경우에는 사용자가 항상 웹브라우저를 통해서 보게 된다.
하지만 기왕 만드는 거 깔끔하고 용량도 작아진다면 더 좋지 않을까?
나는 이걸 compression(압축)하는 방법은 없는지 궁금해지기 시작했다.</p>

<h2 id="minimal-mistakes-테마에서-제공하는-compression">Minimal mistakes 테마에서 제공하는 compression</h2>
<p>처음에는 구글에서 찾아보았다.
Jekyll html compressor 등과 같은 키워드로 검색을 해 보면 몇 개의 플러그인이 나온다.
그 플러그인 중에 설정이 간단해 보이는 것을 하나 골라서 <code class="highlighter-rouge">gem</code> 명령으로 설치했다.
그리고 설정하기 위해 <code class="highlighter-rouge">_config.yml</code> 파일을 열었다.
어라? 그런데 <code class="highlighter-rouge">_config.yml</code> 파일 안에 <code class="highlighter-rouge">compress_html</code> 이라는 항목이 있는 것이었다.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># HTML Compression
# - http://jch.penibelst.de/
compress_html:
  clippings: all
  ignore:
    envs: development
</code></pre></div></div>

<p>아! Minimal mistakes 테마에서 기본적으로 쉽게 사용할 수 있도록 HTML compressor가 포함되어 있었구나…
저기에 있는 사이트에 들어가 보았다. (<a href="http://jch.penibelst.de/">http://jch.penibelst.de/</a>)</p>

<p>설명이 막 있는데…
자세한 설명 참 고맙지만, 나는 일단 지금 그걸 다 읽고 이해하고 싶지는 않아. 그냥 간단하게 어떻게 쓰는지만 알면 되는데…
쭉 내리다보면 Full-blown sample 이라는 제목이 있고 그 아래에 다음과 같은 코드가 있다.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>compress_html:
  clippings: all
  comments: ["&lt;!-- ", " --&gt;"]
  endings: all
  ignore:
    envs: [local]
  blanklines: false
  profile: true
  startings: [html, head, body]
</code></pre></div></div>

<p>오 좋았어.
<code class="highlighter-rouge">_config.yml</code>의 아까 그 부분에 저 샘플대로 입력하고 <code class="highlighter-rouge">jekyll build</code>를 해 보았다.</p>

<p>잘 되었을까?
HTML 파일을 열어보니 아까와 똑같다.</p>

<p>음… 뭐가 문제일까?
이제 아까 대충 스크롤 내리면서 무시했던 문서를 볼 시간이다.</p>

<p>Installation에 보면, 이렇게 하라고 나온다.</p>
<ol>
  <li>Get the latest release. Extract <code class="highlighter-rouge">compress.html</code> and copy it to your <code class="highlighter-rouge">_layouts</code>.</li>
  <li>Reference the compress layout in your highest-level layout. For example in <code class="highlighter-rouge">_layouts/default.html</code>:</li>
</ol>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: compress
---

<span class="nt">&lt;html&gt;</span>
{{ content }}
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>아하~ 이걸 안 해줘서 그랬구나.
Minimal mistakes 테마에는 이미 <code class="highlighter-rouge">_layouts</code> 폴더에 <code class="highlighter-rouge">compress.html</code> 파일이 포함되어 있다. 그러니까 1번 항목은 신경 쓸 필요가 없다.
2번 항목만 해 주면 된다.
가이드대로 <code class="highlighter-rouge">_layouts/default.html</code> 파일의 YAML 헤더에 아래 한 줄만 추가해 주었다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>layout: compress
</code></pre></div></div>

<p>그리고 다시 <code class="highlighter-rouge">jekyll build</code>를 실행하였다.
그랬더니 결과 html 파일은 다음과 같다.</p>

<figure>
  <img src="https://drive.google.com/uc?id=1LjBuuWMp0pag97gOGr7Z9-E6fRv1zpC6" alt="HTML 압축을 하고 난 뒤의 파일을 열어 보면 이런 모습이다. 사람은 읽고 이해할 수 없을 정도로 가독성이 떨어진다." title="HTML compression 후의 HTML 파일" style="border:1px solid #ccc0bd; " />
  <figcaption>HTML 압축을 하고 난 뒤의 파일을 열어 보면 이런 모습이다. 사람은 읽고 이해할 수 없을 정도로 가독성이 떨어진다.</figcaption>
</figure>

<p>내가 원하던 결과물이 나왔다.
사실 처음 본 사람이라면, 이 파일을 HTML 코드로만 보면 이게 무슨 해괴망측한 것인지… 오히려 오류가 발생한 것 아닌지 의심할 수도 있겠다.
하지만 어차피 웹브라우저가 무시하는 줄바꿈, 공백, 탭 등을 모두 지워준 파일이기 때문에 우리 눈에만 복잡해 보일 뿐이지, 잘 동작하는 코드다.</p>

<p>이걸 웹브라우저에서 열어보면 알 수 있는데, 이전과 동일하게 잘 나온다.
그런데 맨 밑으로 내려보니 이상한 게 하나 추가되었다.</p>

<figure>
  <img src="https://drive.google.com/uc?id=1LY8SyDANNL3m69qnw0W143ltkJhwHcIO" alt="포스트 하단에 위와 같은 표가 출력된다." title="얼마나 압축되었는지 알려주는 정보" style="border:1px solid #ccc0bd; " />
  <figcaption>포스트 하단에 위와 같은 표가 출력된다.</figcaption>
</figure>

<p>Compressor가 여러 단계에 걸쳐서 작업을 수행하는데, 그 단계마다 얼마나 줄였는지 알려주는 표인 것 같다.
이걸 친절하다고 생각해야 하는건지, 자랑질이라고 생각해야 하는건지 헷갈린다.</p>

<p>아까 그 문서를 좀 더 보면, 이 표가 <code class="highlighter-rouge">profile</code>이라는 변수 설정에 의해 출력된다고 한다.
그래서 다시 <code class="highlighter-rouge">_config.yml</code> 파일을 열어서 <code class="highlighter-rouge">profile</code>을 <code class="highlighter-rouge">false</code>로 바꾸어 주었다.
그리고 나서 다시 해 보니 이제는 그 표가 출력되지 않았다.</p>

<p>최종적인 HTML 파일을 보니 23,704 byte이다.
처음과 비교해 보면 1,679 byte, 비율로는 약 6.6% 줄어들었다.
엄청나게 드라마틱한 변화는 아니지만, 그래도 뿌듯하다.</p>

<p>위와 같이 결국 내가 <code class="highlighter-rouge">_config.yml</code> 파일에서 설정해 준 부분은 아래와 같다.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>compress_html:
  clippings: all
  comments: ["&lt;!-- ", " --&gt;"]
  endings: all
  ignore:
    envs: [local]
  blanklines: false
  profile: false
  startings: [html, head, body]
</code></pre></div></div>


        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> 태그: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#html-%EC%95%95%EC%B6%95" class="page__taxonomy-item" rel="tag">HTML 압축</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#jekyll" class="page__taxonomy-item" rel="tag">jekyll</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#minimal-mistakes" class="page__taxonomy-item" rel="tag">Minimal mistakes</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#%EB%B8%94%EB%A1%9C%EA%B7%B8" class="page__taxonomy-item" rel="tag">블로그</a>
    
    </span>
  </p>




        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 업데이트:</strong> <time datetime="2019-08-17T14:38:00+09:00">August 17, 2019</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="/blog/2019/08/16/jekyll-disqus/" class="pagination--pager" title="Jekyll에 disqus 연동하기
">이전</a>
    
    
      <a href="#" class="pagination--pager disabled">다음</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">댓글남기기</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">참고</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/blog/2019/08/16/jekyll-disqus/" rel="permalink">Jekyll에 disqus 연동하기
</a>
      
    </h2>
    
    <p class="archive__item-excerpt" itemprop="description">Jekyll에 테마를 설정한 후 이제 블로그답게 만드는 일은 하나 남았다.
그것은 바로 댓글이다.
사실 댓글 시스템이 꼭 필요한 블로그라면 이미 성공한 블로그일 것이다.
대부분의 개인 블로그에는 댓글 섹션이 있지만 유명무실하다.
방문자도 많지 않을 것이고, 방문자 중에서 작성자에게...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/blog/2019/08/12/jekyll-theme/" rel="permalink">Jekyll 테마 설정하기
</a>
      
    </h2>
    
    <p class="archive__item-excerpt" itemprop="description">Jekyll의 기본적인 사항들은 어느 정도 익혔다.
이제 본격적으로 Jekyll을 즐길 준비가 된 것인데, 그러기 위해서는 테마를 내가 원하는 대로 설정하는 일이 남았다.
지금은 Jekyll의 테마 설정을 다 하고 나서 포스팅을 쓰고 있다.
그런데 이전의 그 어떤 작업보다 테마 설...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/blog/2019/08/06/ec2-web-server/" rel="permalink">EC2에서 웹서버 구동하기
</a>
      
    </h2>
    
    <p class="archive__item-excerpt" itemprop="description">지난 포스팅(EC2에서 S3에 접근하는 방법)에서는 EC2에서 만든 정적 웹사이트를 S3에 업로드했다.
그 작업의 목적은 내가 Jekyll을 통해 만든 웹사이트를 github을 통해 배포하기 전에 확인하기 위한 것이었다.

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/blog/2019/08/04/ec2-s3-authority/" rel="permalink">EC2에서 S3에 접근하는 방법
</a>
      
    </h2>
    
    <p class="archive__item-excerpt" itemprop="description">약간의 삽질을 했지만 결국 AWS CLI를 이용하여 ubuntu에서 S3에 업로드하는 방법을 찾았다.
이번 포스팅에서는 그 방법을 정리해 두려고 한다.

</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-copyright">&copy; 2019 chobolife. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>







    
  <script>
    var disqus_config = function () {
      this.page.url = "https://chobolife.github.io/blog/2019/08/17/jekyll-compress/";  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = "/blog/2019/08/17/jekyll-compress"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://chobolife.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  





  </body>
</html>
