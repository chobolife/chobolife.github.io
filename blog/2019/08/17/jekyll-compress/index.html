<!doctype html> <!-- Minimal Mistakes Jekyll Theme 4.16.5 by Michael Rose Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes Free for personal and commercial use under the MIT license https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE --><html lang="ko" class="no-js"><meta charset="utf-8"><title>Jekyll의 Minimal mistakes 테마에서 HTML 압축하기 - 우당탕탕 초보라이프</title><meta name="description" content="Jekyll로 웹사이트를 만드는 것은 아주 만족스러웠다.그리고 처음에는 이 블로그에서 시작했지만, 다른 사이트도 만들어보고 싶은 욕심이 생겨서 조금 해 보고 있다."><meta property="og:type" content="article"><meta property="og:locale" content="ko"><meta property="og:site_name" content="우당탕탕 초보라이프"><meta property="og:title" content="Jekyll의 Minimal mistakes 테마에서 HTML 압축하기"><meta property="og:url" content="https://chobolife.github.io/blog/2019/08/17/jekyll-compress/"><meta property="og:description" content="Jekyll로 웹사이트를 만드는 것은 아주 만족스러웠다.그리고 처음에는 이 블로그에서 시작했지만, 다른 사이트도 만들어보고 싶은 욕심이 생겨서 조금 해 보고 있다."><meta property="article:published_time" content="2019-08-17T20:26:00+09:00"><link rel="canonical" href="https://chobolife.github.io/blog/2019/08/17/jekyll-compress/"> <script type="application/ld+json"> { "@context": "https://schema.org", "@type": "Person", "name": "chobolife", "url": "https://chobolife.github.io", "sameAs": null } </script><link href="/feed.xml" type="application/atom+xml" rel="alternate" title="우당탕탕 초보라이프 Feed"><meta name="viewport" content="width=device-width, initial-scale=1.0"> <script> document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js '; </script><link rel="stylesheet" href="/assets/css/main.css"> <!--[if IE ]><style> /* old IE unsupported flexbox fixes */ .greedy-nav .site-title { padding-right: 3em; } .greedy-nav button { position: absolute; top: 0; right: 0; height: 100%; }</style><![endif]--><body class="layout--single"><nav class="skip-links"><h2 class="screen-reader-text">Skip links</h2><ul><li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a><li><a href="#main" class="screen-reader-shortcut">Skip to content</a><li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></ul></nav><!--[if lt IE 9]><div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]--><div class="masthead"><div class="masthead__inner-wrap"><div class="masthead__menu"><nav id="site-nav" class="greedy-nav"> <a class="site-title" href="/"> 우당탕탕 초보라이프 </a><ul class="visible-links"><li class="masthead__menu-item"> <a href="/categories/" >Category</a><li class="masthead__menu-item"> <a href="/tags/" >Tag</a><li class="masthead__menu-item"> <a href="/about/" >About</a></ul><button class="greedy-nav__toggle hidden" type="button"> <span class="visually-hidden">토글 메뉴</span><div class="navicon"></div></button><ul class="hidden-links hidden"></ul></nav></div></div></div><div class="initial-content"><div id="main" role="main"><article class="page" itemscope itemtype="https://schema.org/CreativeWork"><meta itemprop="headline" content="Jekyll의 Minimal mistakes 테마에서 HTML 압축하기"><meta itemprop="description" content="Jekyll로 웹사이트를 만드는 것은 아주 만족스러웠다.그리고 처음에는 이 블로그에서 시작했지만, 다른 사이트도 만들어보고 싶은 욕심이 생겨서 조금 해 보고 있다."><meta itemprop="datePublished" content="August 17, 2019"><div class="page__inner-wrap"><header><h1 id="page-title" class="page__title" itemprop="headline">Jekyll의 Minimal mistakes 테마에서 HTML 압축하기</h1></header><section class="page__content" itemprop="text"><p>Jekyll로 웹사이트를 만드는 것은 아주 만족스러웠다. 그리고 처음에는 이 블로그에서 시작했지만, 다른 사이트도 만들어보고 싶은 욕심이 생겨서 조금 해 보고 있다.</p><h2 id="html-압축이-필요한-이유">HTML 압축이 필요한 이유</h2><p>그런데 마크다운에서 HTML로 변환이 완료된 파일을 열어 보면 조금 마음에 안 들었다. 아래는 지난 포스팅(<a href="/blog/2019/08/16/jekyll-disqus/">Jekyll에 disqus 연동하기</a>)의 html 파일을 열어 본 것이다.</p><figure> <img src="https://drive.google.com/uc?id=1ztwSEgFRpVY6jX9GOuCj3VqmI8fJtPnI" alt="Jekyll로 생성한 HTML 파일에 줄바꿈이 많이 들어 간 모습이다." title="Jekyll로 생성한 HTML 파일의 예 1" style="border:1px solid #ccc0bd; " /><figcaption>Jekyll로 생성한 HTML 파일에 줄바꿈이 많이 들어 간 모습이다.</figcaption></figure><p>맨 윗 부분에 너무 많은 blank line이 있다. 이것을 Jekyll의 layout 파일이나 include 파일을 따라가 보았는데, 그곳에서 줄이려면 굉장히 많은 수작업이 필요할 뿐 아니라 매우 비효율적일 것 같았다. 비효율적이라고 생각하는 이유는 그 소스코드에는 가독성을 위해 그 나름대로의 행바꿈이나 탭 등이 삽입되어 있는 것이기 때문이다. 그것을 layout 파일 또는 include 파일에서 삭제하는 것은 별로 내키는 방법이 아니다.</p><p>포스트의 아랫 부분에는 태그가 나열되는 부분도 있는데 그 곳의 html 코드는 아래와 같다.</p><figure> <img src="https://drive.google.com/uc?id=1ZHxzFBGctUDdDxlD2IK2vmyKgWqsgFhL" alt="줄바꿈 뿐 아니라 공백도 많이 포함되어 있다. 이는 layout, include 등에 포함된 공백이 HTML로 그대로 옮겨지기 때문이다." title="Jekyll로 생성한 HTML 파일의 예 2" style="border:1px solid #ccc0bd; " /><figcaption>줄바꿈 뿐 아니라 공백도 많이 포함되어 있다. 이는 layout, include 등에 포함된 공백이 HTML로 그대로 옮겨지기 때문이다.</figcaption></figure><p>빈 줄도 문제지만, 쓸데없는 공백이 매우 많이 삽입되어 있다. 이 html 파일의 크기는 25,383 byte이다.</p><p>물론 HTML 파일이 그 자체로 보여질 일은 거의 없다. 특별히 누군가 <em>‘이 웹페이지는 어떻게 구성되어 있는가?’</em> 라는 의문을 갖고 코드를 열어본다면 모르겠지만, 일반적인 경우에는 사용자가 항상 웹브라우저를 통해서 보게 된다. 하지만 기왕 만드는 거 깔끔하고 용량도 작아진다면 더 좋지 않을까? 나는 이걸 compression(압축)하는 방법은 없는지 궁금해지기 시작했다.</p><h2 id="minimal-mistakes-테마에서-제공하는-compression">Minimal mistakes 테마에서 제공하는 compression</h2><p>처음에는 구글에서 찾아보았다. Jekyll html compressor 등과 같은 키워드로 검색을 해 보면 몇 개의 플러그인이 나온다. 그 플러그인 중에 설정이 간단해 보이는 것을 하나 골라서 <code class="highlighter-rouge">gem</code> 명령으로 설치했다. 그리고 설정하기 위해 <code class="highlighter-rouge">_config.yml</code> 파일을 열었다. 어라? 그런데 <code class="highlighter-rouge">_config.yml</code> 파일 안에 <code class="highlighter-rouge">compress_html</code> 이라는 항목이 있는 것이었다.</p><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># HTML Compression
# - http://jch.penibelst.de/
compress_html:
  clippings: all
  ignore:
    envs: development
</code></pre></div></div><p>아! Minimal mistakes 테마에서 기본적으로 쉽게 사용할 수 있도록 HTML compressor가 포함되어 있었구나… 저기에 있는 사이트에 들어가 보았다. (<a href="http://jch.penibelst.de/" target="_blank">http://jch.penibelst.de/</a>)</p><p>설명이 막 있는데… 자세한 설명 참 고맙지만, 나는 일단 지금 그걸 다 읽고 이해하고 싶지는 않아. 그냥 간단하게 어떻게 쓰는지만 알면 되는데… 쭉 내리다보면 Full-blown sample 이라는 제목이 있고 그 아래에 다음과 같은 코드가 있다.</p><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>compress_html:
  clippings: all
  comments: ["&lt;!-- ", " --&gt;"]
  endings: all
  ignore:
    envs: [local]
  blanklines: false
  profile: true
  startings: [html, head, body]
</code></pre></div></div><p>오 좋았어. <code class="highlighter-rouge">_config.yml</code>의 아까 그 부분에 저 샘플대로 입력하고 <code class="highlighter-rouge">jekyll build</code>를 해 보았다.</p><p>잘 되었을까? HTML 파일을 열어보니 아까와 똑같다.</p><p>음… 뭐가 문제일까? 이제 아까 대충 스크롤 내리면서 무시했던 문서를 볼 시간이다.</p><p>Installation에 보면, 이렇게 하라고 나온다.</p><ol><li>Get the latest release. Extract <code class="highlighter-rouge">compress.html</code> and copy it to your <code class="highlighter-rouge">_layouts</code>.<li>Reference the compress layout in your highest-level layout. For example in <code class="highlighter-rouge">_layouts/default.html</code>:</ol><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: compress
---

<span class="nt">&lt;html&gt;</span>
{{ content }}
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div><p>아하~ 이걸 안 해줘서 그랬구나. Minimal mistakes 테마에는 이미 <code class="highlighter-rouge">_layouts</code> 폴더에 <code class="highlighter-rouge">compress.html</code> 파일이 포함되어 있다. 그러니까 1번 항목은 신경 쓸 필요가 없다. 2번 항목만 해 주면 된다. 가이드대로 <code class="highlighter-rouge">_layouts/default.html</code> 파일의 YAML 헤더에 아래 한 줄만 추가해 주었다.</p><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>layout: compress
</code></pre></div></div><p>그리고 다시 <code class="highlighter-rouge">jekyll build</code>를 실행하였다. 그랬더니 결과 html 파일은 다음과 같다.</p><figure> <img src="https://drive.google.com/uc?id=1LjBuuWMp0pag97gOGr7Z9-E6fRv1zpC6" alt="HTML 압축을 하고 난 뒤의 파일을 열어 보면 이런 모습이다. 사람은 읽고 이해할 수 없을 정도로 가독성이 떨어진다." title="HTML compression 후의 HTML 파일" style="border:1px solid #ccc0bd; " /><figcaption>HTML 압축을 하고 난 뒤의 파일을 열어 보면 이런 모습이다. 사람은 읽고 이해할 수 없을 정도로 가독성이 떨어진다.</figcaption></figure><p>내가 원하던 결과물이 나왔다. 사실 처음 본 사람이라면, 이 파일을 HTML 코드로만 보면 이게 무슨 해괴망측한 것인지… 오히려 오류가 발생한 것 아닌지 의심할 수도 있겠다. 하지만 어차피 웹브라우저가 무시하는 줄바꿈, 공백, 탭 등을 모두 지워준 파일이기 때문에 우리 눈에만 복잡해 보일 뿐이지, 잘 동작하는 코드다.</p><p>이걸 웹브라우저에서 열어보면 알 수 있는데, 이전과 동일하게 잘 나온다. 그런데 맨 밑으로 내려보니 이상한 게 하나 추가되었다.</p><figure> <img src="https://drive.google.com/uc?id=1LY8SyDANNL3m69qnw0W143ltkJhwHcIO" alt="포스트 하단에 위와 같은 표가 출력된다." title="얼마나 압축되었는지 알려주는 정보" style="border:1px solid #ccc0bd; " /><figcaption>포스트 하단에 위와 같은 표가 출력된다.</figcaption></figure><p>Compressor가 여러 단계에 걸쳐서 작업을 수행하는데, 그 단계마다 얼마나 줄였는지 알려주는 표인 것 같다. 이걸 친절하다고 생각해야 하는건지, 자랑질이라고 생각해야 하는건지 헷갈린다.</p><p>아까 그 문서를 좀 더 보면, 이 표가 <code class="highlighter-rouge">profile</code>이라는 변수 설정에 의해 출력된다고 한다. 그래서 다시 <code class="highlighter-rouge">_config.yml</code> 파일을 열어서 <code class="highlighter-rouge">profile</code>을 <code class="highlighter-rouge">false</code>로 바꾸어 주었다. 그리고 나서 다시 해 보니 이제는 그 표가 출력되지 않았다.</p><p>최종적인 HTML 파일을 보니 23,704 byte이다. 처음과 비교해 보면 1,679 byte, 비율로는 약 6.6% 줄어들었다. 엄청나게 드라마틱한 변화는 아니지만, 그래도 뿌듯하다.</p><p>위와 같이 결국 내가 <code class="highlighter-rouge">_config.yml</code> 파일에서 설정해 준 부분은 아래와 같다.</p><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>compress_html:
  clippings: all
  comments: ["&lt;!-- ", " --&gt;"]
  endings: all
  ignore:
    envs: [local]
  blanklines: false
  profile: false
  startings: [html, head, body]
</code></pre></div></div><h2 id="javascript에서-발생한-문제">Javascript에서 발생한 문제</h2><p>이렇게만 하고 모든 것이 잘 끝났다면 얼마나 좋을까. 그런데 개발을 하다보면 늘 그렇듯이, 한 번에 잘 안 끝난다. 포스팅이 잘 뜨는지만 확인했었는데 밑으로 내려 보니 댓글이 안 보이는 것이다…</p><p>Disqus가 정적 웹사이트에서 댓글을 사용할 수 있게 만들어주는 대강의 원리는 이렇다. 일단 댓글 기능을 달고 싶은 부분에 아래 HTML 코드를 넣는다.</p><div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">"disqus_thread"</span><span class="nt">&gt;&lt;/section&gt;</span>
</code></pre></div></div><p>그리고 해당 웹페이지에서 disqus 서버에 있는 javascript를 실행한다. Minimal mistakes 테마에서는 <code class="highlighter-rouge">_includes/comments-providers/disqus.html</code> 파일에 아래와 같은 부분이 있다.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="nx">site</span><span class="p">.</span><span class="nx">comments</span><span class="p">.</span><span class="nx">disqus</span><span class="p">.</span><span class="nx">shortname</span> <span class="o">%</span><span class="p">}</span>
  <span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
    <span class="kd">var</span> <span class="nx">disqus_config</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">{{ page.url | absolute_url }}</span><span class="dl">"</span><span class="p">;</span>  <span class="c1">// Replace PAGE_URL with your page's canonical URL variable</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">identifier</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">{{ page.id }}</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// Replace PAGE_IDENTIFIER with your page's unique identifier variable</span>
    <span class="p">};</span>
    <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// DON'T EDIT BELOW THIS LINE</span>
      <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nb">document</span><span class="p">,</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">script</span><span class="dl">'</span><span class="p">);</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://{{ site.comments.disqus.shortname }}.disqus.com/embed.js</span><span class="dl">'</span><span class="p">;</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">data-timestamp</span><span class="dl">'</span><span class="p">,</span> <span class="o">+</span><span class="k">new</span> <span class="nb">Date</span><span class="p">());</span>
      <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">head</span> <span class="o">||</span> <span class="nx">d</span><span class="p">.</span><span class="nx">body</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
    <span class="p">})();</span>
  <span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">noscript</span><span class="o">&gt;</span><span class="nx">Please</span> <span class="nx">enable</span> <span class="nx">JavaScript</span> <span class="nx">to</span> <span class="nx">view</span> <span class="nx">the</span> <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="dl">"</span><span class="s2">https://disqus.com/?ref_noscript</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">comments</span> <span class="nx">powered</span> <span class="nx">by</span> <span class="nx">Disqus</span><span class="p">.</span><span class="o">&lt;</span><span class="sr">/a&gt;&lt;/</span><span class="nx">noscript</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="nx">endif</span> <span class="o">%</span><span class="p">}</span>
</code></pre></div></div><p>위 javascript 코드는 내 블로그의 경우에는 <code class="highlighter-rouge">https://chobolife.disqus.com/embed.js</code> 파일을 실행한다. 그리고 아까 HTML에 넣었던 <code class="highlighter-rouge">disqus_thread</code> 섹션에 댓글 기능을 삽입하는 식이다.</p><p>어디에서 문제가 있는 것일까 확인해 보았다.</p><ol><li>Compression하면서 HTML 소스 코드에 <code class="highlighter-rouge">disqus_thread</code> 섹션이 사라졌나? 아니다. 그대로 있다.<li>그러면 저 javascript 코드가 빠져 있나? 그것도 아니다.</ol><p>유추해보니 <strong>문제는 javascript가 실행되지 않고 있는 것</strong>이다. 나의 추측을 뒷받침해주는 사실을 발견했다. 아래 그림은 HTML compression을 하기 전, 그러니까 원래의 페이지를 크롬에서 불러올 때 개발자 도구의 Network 탭을 캡쳐한 것이다.</p><figure> <img src="https://drive.google.com/uc?id=1D2gQm78ezBZ5z1smcCMzcZBVUhmI63GR" alt="크롬 개발자 도구의 Network를 보면 웹페이지를 읽어올 때 생기는 interaction을 확인할 수 있다. HTML 압축을 하기 전에는 disqus 서버로부터 embed.js 파일을 받아 왔다." title="개발자 도구에서 확인할 수 있는 embed.js 파일 다운" style="border:1px solid #ccc0bd; " /><figcaption>크롬 개발자 도구의 Network를 보면 웹페이지를 읽어올 때 생기는 interaction을 확인할 수 있다. HTML 압축을 하기 전에는 disqus 서버로부터 embed.js 파일을 받아 왔다.</figcaption></figure><p>파일 <code class="highlighter-rouge">embed.js</code>이 아까 <code class="highlighter-rouge">chobolife.disqus.com</code> 에서 가져오는 부분이다. 그런데 HTML compression을 하고 난 페이지를 로드할 때는 아래와 같다.</p><figure> <img src="https://drive.google.com/uc?id=1MpN_RDNLM4KNlRz4tkRVJM8K_D1oN7rw" alt="HTML 압축을 하고 난 뒤에는 embed.js를 다운로드하지 않는다. 그 뿐 아니라 상당히 많은 interaction이 사라졌다." title="embed.js 파일을 더 이상 다운로드 하지 않는다" style="border:1px solid #ccc0bd; " /><figcaption>HTML 압축을 하고 난 뒤에는 embed.js를 다운로드하지 않는다. 그 뿐 아니라 상당히 많은 interaction이 사라졌다.</figcaption></figure><p>아까 있었던 <code class="highlighter-rouge">embed.js</code> 파일이 없다. Request 숫자도 76개에서 13개로 엄청나게 줄었다. 아마도 javascript가 제대로 실행되지 않는 것이다.</p><p>머릿속을 확 스치는 생각이 있었다. Javascript의 문법을 잘 알지는 못하지만 아까 <code class="highlighter-rouge">_includes/comments-providers/disqus.html</code> 파일을 열어 보았을 때 주석처리를 <code class="highlighter-rouge">//</code> 로 하는 것 같다. 그런데 이 방법으로 주석을 다는 것은 열고 닫는 것이 없다.</p><p>예를 들면 HTML의 <code class="highlighter-rouge">&lt;!--</code>와 <code class="highlighter-rouge">--&gt;</code> 라든지, C/C++의 <code class="highlighter-rouge">/*</code>와 <code class="highlighter-rouge">*/</code> 처럼 열고 닫는 방식으로 주석을 달면 그 안의 모든 문자열이 무시된다. 그런데 열고 닫는 주석이 아닌, C/C++의 <code class="highlighter-rouge">//</code> 와 같은 주석처리 방법은 <code class="highlighter-rouge">//</code> 이후에 있는 해당 줄의 모든 문자열을 무시하고, 다음 줄에서는 저절로 주석 해제가 되는 식이다. 전자를 <em>block comment</em>, 후자를 <em>line comment</em>라고 한다. (<a href="https://en.wikipedia.org/wiki/Comment_(computer_programming)" target="_blank">Wikipedia 참고</a>)</p><blockquote><p>HTML 압축을 하면 모든 줄바꿈이 사라지는데, 그러면서 아마 javascript에서 주석처리가 되어 있는 <code class="highlighter-rouge">//</code>이 그 뒤의 모든 코드를 무력화시키는 것은 아닐까?</p></blockquote><p>이렇게 생각하며 나는 위의 파일 <code class="highlighter-rouge">_includes/comments-providers/disqus.html</code>을 다시 열어서 line comment 세 부분을 아예 삭제해 버렸다.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="nx">site</span><span class="p">.</span><span class="nx">comments</span><span class="p">.</span><span class="nx">disqus</span><span class="p">.</span><span class="nx">shortname</span> <span class="o">%</span><span class="p">}</span>
  <span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
    <span class="kd">var</span> <span class="nx">disqus_config</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">{{ page.url | absolute_url }}</span><span class="dl">"</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">identifier</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">{{ page.id }}</span><span class="dl">"</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nb">document</span><span class="p">,</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">script</span><span class="dl">'</span><span class="p">);</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://{{ site.comments.disqus.shortname }}.disqus.com/embed.js</span><span class="dl">'</span><span class="p">;</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">data-timestamp</span><span class="dl">'</span><span class="p">,</span> <span class="o">+</span><span class="k">new</span> <span class="nb">Date</span><span class="p">());</span>
      <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">head</span> <span class="o">||</span> <span class="nx">d</span><span class="p">.</span><span class="nx">body</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
    <span class="p">})();</span>
  <span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">noscript</span><span class="o">&gt;</span><span class="nx">Please</span> <span class="nx">enable</span> <span class="nx">JavaScript</span> <span class="nx">to</span> <span class="nx">view</span> <span class="nx">the</span> <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="dl">"</span><span class="s2">https://disqus.com/?ref_noscript</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">comments</span> <span class="nx">powered</span> <span class="nx">by</span> <span class="nx">Disqus</span><span class="p">.</span><span class="o">&lt;</span><span class="sr">/a&gt;&lt;/</span><span class="nx">noscript</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="nx">endif</span> <span class="o">%</span><span class="p">}</span>
</code></pre></div></div><p>그리고 나서 다시 웹브라우저에 띄워 보니… 이제는 잘 된다. 휴우… 다행히 대공사가 필요한 큰 문제는 아니었다.</p><p>위와 같이 하고 나서 동일한 포스팅을 로드했을 때 개발자 도구에서 보면 아래와 같다.</p><figure> <img src="https://drive.google.com/uc?id=1KtWEQt0f3QUHuWKkQrZXiLmhSkNThwH5" alt="Javascript의 line comment를 삭제해 버리면 다시 embed.js 파일을 다운로드한다." title="HTML 압축을 하고 난 뒤 개발자 도구에서 확인" style="border:1px solid #ccc0bd; " /><figcaption>Javascript의 line comment를 삭제해 버리면 다시 embed.js 파일을 다운로드한다.</figcaption></figure><p>HTML index page가 아까는 6.8KB였는데 6.3 KB로 줄었다. 그러면서 javascript도 잘 동작하고, 별다른 문제는 없어보인다. 굳이 문제를 꼽자면 로딩에 4초가 넘게 걸린다는 게 문제이긴 한데… 이건 여러 가지 요인이 있을 수 있으므로 다음에 생각하기로 하자.</p></section><footer class="page__meta"><p class="page__taxonomy"> <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> 태그: </strong> <span itemprop="keywords"> <a href="/tags/#html-%EC%95%95%EC%B6%95" class="page__taxonomy-item" rel="tag">HTML 압축</a><span class="sep">, </span> <a href="/tags/#jekyll" class="page__taxonomy-item" rel="tag">jekyll</a><span class="sep">, </span> <a href="/tags/#minimal-mistakes" class="page__taxonomy-item" rel="tag">Minimal mistakes</a><span class="sep">, </span> <a href="/tags/#%EB%B8%94%EB%A1%9C%EA%B7%B8" class="page__taxonomy-item" rel="tag">블로그</a> </span></p><p class="page__taxonomy"> <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> 카테고리: </strong> <span itemprop="keywords"> <a href="/categories/#%EB%B8%94%EB%A1%9C%EA%B7%B8" class="page__taxonomy-item" rel="tag">블로그</a> </span></p><p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 업데이트:</strong> <time datetime="2019-08-17T20:26:00+09:00">August 17, 2019</time></p></footer><nav class="pagination"> <a href="/blog/2019/08/16/jekyll-disqus/" class="pagination--pager" title="Jekyll에 disqus 연동하기 ">이전</a> <a href="/blog/2019/08/20/swim-start-1/" class="pagination--pager" title="수영을 배우기 위한 준비 1편: 시간, 장소 ">다음</a></nav></div><div class="page__comments"><h4 class="page__comments-title">댓글남기기</h4><section id="disqus_thread"></section></div></article><div class="page__related"><h4 class="page__related-title">참고</h4><div class="grid__wrapper"><div class="grid__item"><article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"><h2 class="archive__item-title" itemprop="headline"> <a href="/blog/2019/10/19/bundang-olympic-youth/" rel="permalink">분당올림픽스포츠센터 어린이, 청소년 프로그램 안내 </a></h2><p class="archive__item-excerpt" itemprop="description">안녕하세요. 지난번에는 분당올림픽스포츠센터의 브로셔를 올리고 어떤 프로그램이 있는지 확인해 보았는데요. (수영장 정보: 분당올림픽스포츠센터 프로그램 안내) 해당 포스팅에 있는 내용은 성인용 프로그램이었죠?</p></article></div><div class="grid__item"><article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"><h2 class="archive__item-title" itemprop="headline"> <a href="/blog/2019/10/17/swim-muscle-diet/" rel="permalink">[수영고정관념 2] 수영은 몸 만들기에 좋은 운동이다? </a></h2><p class="archive__item-excerpt" itemprop="description">오늘의 주제는 이것입니다. 수영은 몸 만들기에 좋은 운동일까?</p></article></div><div class="grid__item"><article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"><h2 class="archive__item-title" itemprop="headline"> <a href="/blog/2019/10/05/map-in-blog/" rel="permalink">웹페이지에 지도 삽입하기 </a></h2><p class="archive__item-excerpt" itemprop="description">지난 주에는 분당올림픽스포츠센터의 브로셔를 올리면서 포스팅에 지도를 삽입했다. (해당 포스팅은 수영장 정보: 분당올림픽스포츠센터 프로그램 안내이다.) 지도를 삽입하는 방법에 대해서 약간의 시행착오가 있었지만 지금은 좋은 방법을 찾았다.</p></article></div><div class="grid__item"><article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"><h2 class="archive__item-title" itemprop="headline"> <a href="/blog/2019/10/02/water-in-ear/" rel="permalink">귀에 물이 들어갔을 때 어떻게 해요? </a></h2><p class="archive__item-excerpt" itemprop="description">안녕하세요. 수영을 하다 보면 귀에 물이 들어갈 때가 많죠? 저도 자주 그래요. 근데 이게 처음에는 당황스러웠는데 인터넷에서 이 방법, 저 방법 찾아서 해 보다가 지금은 저에게 맞는 방법을 찾아서 그 방법으로 하고 있습니다.</p></article></div></div></div></div></div><div id="footer" class="page__footer"><footer><div class="page__footer-copyright">&copy; 2019 chobolife. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div></footer></div><script src="/assets/js/main.min.js"></script> <script src="https://kit.fontawesome.com/4eee35f757.js"></script> <script> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-141049037-4']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script> <script> var disqus_config = function () { this.page.url = "https://chobolife.github.io/blog/2019/08/17/jekyll-compress/"; this.page.identifier = "/blog/2019/08/17/jekyll-compress"; }; (function() { var d = document, s = d.createElement('script'); s.src = 'https://chobolife.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
