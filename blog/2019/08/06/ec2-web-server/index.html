<!doctype html> <!-- Minimal Mistakes Jekyll Theme 4.16.5 by Michael Rose Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes Free for personal and commercial use under the MIT license https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE --><html lang="ko" class="no-js"><meta charset="utf-8"><title>EC2에서 웹서버 구동하기 - 우당탕탕 초보라이프</title><meta name="description" content="지난 포스팅(EC2에서 S3에 접근하는 방법)에서는 EC2에서 만든 정적 웹사이트를 S3에 업로드했다.그 작업의 목적은 내가 Jekyll을 통해 만든 웹사이트를 github을 통해 배포하기 전에 확인하기 위한 것이었다."><meta property="og:type" content="article"><meta property="og:locale" content="ko"><meta property="og:site_name" content="우당탕탕 초보라이프"><meta property="og:title" content="EC2에서 웹서버 구동하기"><meta property="og:url" content="https://chobolife.github.io/blog/2019/08/06/ec2-web-server/"><meta property="og:description" content="지난 포스팅(EC2에서 S3에 접근하는 방법)에서는 EC2에서 만든 정적 웹사이트를 S3에 업로드했다.그 작업의 목적은 내가 Jekyll을 통해 만든 웹사이트를 github을 통해 배포하기 전에 확인하기 위한 것이었다."><meta property="article:published_time" content="2019-08-06T22:15:00+09:00"><link rel="canonical" href="https://chobolife.github.io/blog/2019/08/06/ec2-web-server/"> <script type="application/ld+json"> { "@context": "https://schema.org", "@type": "Person", "name": "chobolife", "url": "https://chobolife.github.io", "sameAs": null } </script><link href="/feed.xml" type="application/atom+xml" rel="alternate" title="우당탕탕 초보라이프 Feed"><meta name="viewport" content="width=device-width, initial-scale=1.0"> <script> document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js '; </script><link rel="stylesheet" href="/assets/css/main.css"> <!--[if IE ]><style> /* old IE unsupported flexbox fixes */ .greedy-nav .site-title { padding-right: 3em; } .greedy-nav button { position: absolute; top: 0; right: 0; height: 100%; }</style><![endif]--><body class="layout--single"><nav class="skip-links"><h2 class="screen-reader-text">Skip links</h2><ul><li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a><li><a href="#main" class="screen-reader-shortcut">Skip to content</a><li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></ul></nav><!--[if lt IE 9]><div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]--><div class="masthead"><div class="masthead__inner-wrap"><div class="masthead__menu"><nav id="site-nav" class="greedy-nav"> <a class="site-title" href="/"> 우당탕탕 초보라이프 </a><ul class="visible-links"><li class="masthead__menu-item"> <a href="/tags/" >Tags</a><li class="masthead__menu-item"> <a href="/about/" >About</a></ul><button class="greedy-nav__toggle hidden" type="button"> <span class="visually-hidden">토글 메뉴</span><div class="navicon"></div></button><ul class="hidden-links hidden"></ul></nav></div></div></div><div class="initial-content"><div id="main" role="main"><article class="page" itemscope itemtype="https://schema.org/CreativeWork"><meta itemprop="headline" content="EC2에서 웹서버 구동하기"><meta itemprop="description" content="지난 포스팅(EC2에서 S3에 접근하는 방법)에서는 EC2에서 만든 정적 웹사이트를 S3에 업로드했다.그 작업의 목적은 내가 Jekyll을 통해 만든 웹사이트를 github을 통해 배포하기 전에 확인하기 위한 것이었다."><meta itemprop="datePublished" content="August 06, 2019"><div class="page__inner-wrap"><header><h1 id="page-title" class="page__title" itemprop="headline">EC2에서 웹서버 구동하기</h1></header><section class="page__content" itemprop="text"><p>지난 포스팅(<a href="/blog/2019/08/04/ec2-s3-authority/">EC2에서 S3에 접근하는 방법</a>)에서는 EC2에서 만든 정적 웹사이트를 S3에 업로드했다. 그 작업의 목적은 내가 Jekyll을 통해 만든 웹사이트를 github을 통해 배포하기 전에 확인하기 위한 것이었다.</p><h2 id="문제-발생">문제 발생</h2><p>지난 포스트(<a href="/blog/2019/07/27/start-jekyll-2/">나의 Jekyll 여행기 (2)</a>)를 보면 알겠지만 나는 내 작업 컴퓨터에서 Jekyll을 돌리고 있지 않다. EC2에 만들어 놓은 ubuntu에 ssh로 접속해서 Jekyll을 수행하고 있었기 때문에 내가 수정하고 있는 것을 바로 확인할 수가 없었다. 그래서 S3에 업로드해서 웹브라우저에서 확인하고, 다시 터미널에서 수정하고 S3에 업로드하고, 하는 식으로 작업했던 것이다.</p><p>그런데 문제는 새로운 테마를 시도해보면서 발생했다. 내가 포스팅의 초안을 발행하고 확인하는 작업만 했으면 문제가 늦게 발생했을지도 모르겠다. 이것저것 테마를 깔아서 S3에 올리고 웹브라우저에서 다시 확인해보는 작업을 얼마 하지도 않았는데, AWS의 프리 티어를 소진했다는 메일이 왔다. AWS의 결제 화면에 들어가서 보니 다른 건 문제가 안 되는데 PUT request가 2천회를 초과했다.</p><figure> <img src="https://drive.google.com/uc?id=14KsFo5AqGFVo_CV4Kisz1KorejPNAimC" alt="AWS 프리 티어를 초과했다는 메일을 받고 부랴부랴 결제 페이지에 들어가 보았다. AWS S3의 Put request가 프리 티어 제공량을 초과했다." title="AWS 프리 티어의 기본 제공량을 초과한 결제 화면" style="border:1px solid #ccc0bd; " /><figcaption>AWS 프리 티어를 초과했다는 메일을 받고 부랴부랴 결제 페이지에 들어가 보았다. AWS S3의 Put request가 프리 티어 제공량을 초과했다.</figcaption></figure><p>테마마다 생성되는 파일이 많기 때문에 그런 것 같다. 각 파일의 용량은 작을지라도 숫자 자체가 많은 건 어쩔 수 없다.</p><p>그래서 S3에 업로드하고 확인하는 것을 중단하고 그냥 테마를 바꾸는 것도 그냥 github pages에 올려서 확인하였다. Github pages에 파일을 올리면 웹서버에 반영되기까지 약간 딜레이가 있다. 불편하긴 하지만 어쩔 수 없는 것이라고 생각했다. 참고 써야지 뭐…</p><p>마음에 드는 테마도 설치하고 Jekyll에 익숙해지다보니 Jekyll을 이용해서 다른 웹사이트도 만들어보고 싶다는 생각이 들었다. 그런데 또 다시 고민이 생겼다.</p><blockquote><p>호스팅을 어디에 할 건가? Github pages는 이미 내가 쓰고 있고, AWS S3는 요금이 발생하게 된다. 물론 방법은 있지… 다른 무료 호스팅을 제공하는 서비스를 찾아도 되고, github이나 AWS 계정을 새로 만들어도 되니까…</p></blockquote><p>하지만 문득 이런 생각이 들었다.</p><blockquote><p>잠깐… 내가 지금 쓰고 있는 EC2 instace를 웹서버로 만들면 되잖아?</p></blockquote><p>도대체 왜 이 생각을 못했던 거지? 어차피 뭐 대단한 사이트 만들 것도 아니고 이용자도 나 말고는 없을텐데…</p><p>바로 실행에 옮겨보기로 했다.</p><h2 id="ec2-instance에-apache2-설치">EC2 instance에 apache2 설치</h2><p>과정은 간단하다. Apache2를 설치하고 보안 설정을 해 주면 된다. 먼저 apache2를 설치하려면 터미널에서 다음과 같이 입력한다.</p><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install apache2
</code></pre></div></div><p>그러면 주르륵 로그가 출력되며 apache2가 설치된다. Apache2의 설치 과정은 어렵지도 않고 중간에 문제가 발생할 일도 거의 없으므로 더 설명할 것이 없다.</p><h2 id="보안-설정하기">보안 설정하기</h2><p>웹서버를 구동할 수 있는 apache2를 설치했다면, 다음으로는 이 EC2 instace에 대한 접근을 열어주어야 한다. AWS EC2에서는 이것을 EC2 instance에 보안 그룹을 연결해 주는 것으로 한다. 이미 원하는 접근 권한으로 보안 그룹이 만들어져 있다면 그것을 바로 해당 EC2 instance에 연결해 주면 되지만, 없다면 보안 그룹을 생성해야 한다.</p><p>보안 그룹이 없다면 이렇게 생성할 수 있다.</p><p>EC2 대시보드의 왼쪽에 있는 메뉴 중에서 <strong>네트워크 및 보안</strong> 아래에 있는 <strong>보안 그룹</strong>을 클릭한다. 그러면 보안 그룹 화면이 뜨는데 거기에서 위쪽에 있는 파란색 버튼인 <strong>보안 그룹 생성</strong>을 클릭한다. ‘보안 그룹 생성’이라는 창이 뜨게 된다. 아래 그림과 같이 입력한다.</p><figure> <img src="https://drive.google.com/uc?id=139xTa31sSvykUosARhvOFvphFQkSzXts" alt="공개 웹 서버에 연결하기 위한 보안 그룹을 설정한다. SSH, HTTP, HTTPS의 인바운드를 열어 주면 된다." title="공개 웹 서버의 보안 그룹 설정" style="border:1px solid #ccc0bd; " /><figcaption>공개 웹 서버에 연결하기 위한 보안 그룹을 설정한다. SSH, HTTP, HTTPS의 인바운드를 열어 주면 된다.</figcaption></figure><p><strong>보안 그룹 이름</strong>과 <strong>설명</strong>에는 말 그대로 이름과 간단한 설명을 써 준다. 그리고 하단에 있는 <strong>보안 그룹 규칙</strong>을 채워야 한다. 아래에 있는 <strong>규칙 추가</strong> 버튼을 누르면 레코드가 생기는데, 여기에서 필요한 유형은 <strong>SSH</strong>, <strong>HTTP</strong>, <strong>HTTPS</strong>이다. 오른쪽에 있는 항목들은 대부분 저절로 입력되는데, 혹시 자동으로 입력되지 않는 항목이 있다면 위 그림과 동일하게 채워 준다. 내가 했을 때는 SSH의 소스가 자동으로 채워지지 않았던 것 같다.</p><p>모두 입력했으면 오른쪽 하단의 <strong>생성</strong> 버튼을 클릭한다. 이렇게 하면 웹서버를 공개할 수 있도록 보안 그룹을 생성한 것이다.</p><p>이제는 EC2 instance에 보안 그룹을 연결해 주어야 한다. 다시 인스턴스 화면으로 돌아가서, EC2 instance에서 마우스 우클릭을 하여 <strong>네트워킹</strong> → <strong>보안 그룹 변경</strong>을 클릭한다.</p><figure> <img src="https://drive.google.com/uc?id=1YIkic8eD1P3qKzhvHmW1JRGkz89Bwh_P" alt="보안 그룹을 생성했다면, 다음으로는 EC2 인스턴스에 보안 그룹을 연결해 주어야 한다." title="EC2 인스턴스에 보안 그룹 연결하기" style="border:1px solid #ccc0bd; " /><figcaption>보안 그룹을 생성했다면, 다음으로는 EC2 인스턴스에 보안 그룹을 연결해 주어야 한다.</figcaption></figure><p>그러면 ‘보안 그룹 변경’이라는 창이 뜬다. 여기에서 아까 만들어 준 보안 그룹을 체크하고 <strong>보안 그룹 할당</strong> 버튼을 클릭하면 된다.</p><h2 id="접속하기">접속하기</h2><p>이제 EC2 instance는 웹서버로 동작할 것이다. 웹서버에 접속할 주소는 EC2 instance를 클릭하면 하단에 나오는 정보 중에서 오른쪽 위에 있는 <strong>퍼블릭 DNS(IPv4)</strong> 또는 <strong>IPv4 퍼블릭 IP</strong>이다.</p><figure> <img src="https://drive.google.com/uc?id=1kN22n-pjLDAATzkMEd-QsccGDaggx0Cj" alt="EC2 인스턴스의 속성 중에서 '퍼블릭 DNS(IPv4)' 또는 'IPv4 퍼블릭 IP'이 주소가 된다." title="EC2 인스턴스의 속성" style="border:1px solid #ccc0bd; " /><figcaption>EC2 인스턴스의 속성 중에서 '퍼블릭 DNS(IPv4)' 또는 'IPv4 퍼블릭 IP'이 주소가 된다.</figcaption></figure><p>아래와 같은 화면이 나온다면 제대로 웹서버가 동작하고 있는 것이다.</p><figure> <img src="https://drive.google.com/uc?id=1wsWCqVB-yZf5PRDcoHeaadsy4sz3Zr5u" alt="Apache2를 설치하고 난 후 웹브라우저에서 접속하면 기본으로 설정된 페이지가 보인다." title="Apache2의 default index 페이지" style="border:1px solid #ccc0bd; " /><figcaption>Apache2를 설치하고 난 후 웹브라우저에서 접속하면 기본으로 설정된 페이지가 보인다.</figcaption></figure><p>만약에 안 된다면 EC2 instance를 재부팅해보면 될 것이다. 그래도 안 된다면… 나도 잘 모르겠다. 하지만 아마 구글은 알겠지…</p><p>위 화면은 <code class="highlighter-rouge">/var/www/html/</code> 아래에 있는 <code class="highlighter-rouge">index.html</code> 파일이다. 이제 내가 만든 사이트를 위 디렉토리로 복사하면 된다.</p></section><footer class="page__meta"><p class="page__taxonomy"> <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> 태그: </strong> <span itemprop="keywords"> <a href="/tags/#apache2" class="page__taxonomy-item" rel="tag">apache2</a><span class="sep">, </span> <a href="/tags/#aws-ec2" class="page__taxonomy-item" rel="tag">AWS EC2</a><span class="sep">, </span> <a href="/tags/#aws" class="page__taxonomy-item" rel="tag">AWS</a><span class="sep">, </span> <a href="/tags/#%EB%B3%B4%EC%95%88-%EA%B7%B8%EB%A3%B9" class="page__taxonomy-item" rel="tag">보안 그룹</a><span class="sep">, </span> <a href="/tags/#%EB%B8%94%EB%A1%9C%EA%B7%B8" class="page__taxonomy-item" rel="tag">블로그</a> </span></p><p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 업데이트:</strong> <time datetime="2019-08-06T22:15:00+09:00">August 06, 2019</time></p></footer><nav class="pagination"> <a href="/blog/2019/08/04/ec2-s3-authority/" class="pagination--pager" title="EC2에서 S3에 접근하는 방법 ">이전</a> <a href="/blog/2019/08/12/jekyll-theme/" class="pagination--pager" title="Jekyll 테마 설정하기 ">다음</a></nav></div><div class="page__comments"><h4 class="page__comments-title">댓글남기기</h4><section id="disqus_thread"></section></div></article><div class="page__related"><h4 class="page__related-title">참고</h4><div class="grid__wrapper"><div class="grid__item"><article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"><h2 class="archive__item-title" itemprop="headline"> <a href="/blog/2019/09/28/bundang-olympic/" rel="permalink">수영장 정보: 분당올림픽스포츠센터 </a></h2><p class="archive__item-excerpt" itemprop="description">안녕하세요. 오늘은 분당올림픽스포츠센터의 브로셔를 공유하고 정보를 알려드리려고 합니다. 각 프로그램의 시간, 요일, 수강료, 수강대상 등의 정보가 있습니다. 브로셔 전체의 pdf 파일은 이 포스트 제일 하단에 있습니다.</p></article></div><div class="grid__item"><article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"><h2 class="archive__item-title" itemprop="headline"> <a href="/blog/2019/09/27/swim-myth-1/" rel="permalink">수영 고정관념 1편: 수영은 관절에 무조건 좋을까? </a></h2><p class="archive__item-excerpt" itemprop="description">오늘의 주제는 이것입니다. 정말 수영은 관절에 무조건 좋을까?</p></article></div><div class="grid__item"><article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"><h2 class="archive__item-title" itemprop="headline"> <a href="/blog/2019/09/19/verilog-array-simvision/" rel="permalink">Verilog에서 사용한 배열을 simvision에서 확인하기 </a></h2><p class="archive__item-excerpt" itemprop="description">전통적인 배열 사용 방법 Verilog로 코드를 짜다보면 가끔 2차원 배열을 사용하고 싶을 때가 있다. 거의 대부분은 2차원 배열을 아래와 같이 선언한다. 아래 코드는 32-bit wire를 1024개짜리의 배열로 선언하고 사용하는 코드이다.</p></article></div><div class="grid__item"><article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"><h2 class="archive__item-title" itemprop="headline"> <a href="/blog/2019/08/29/swim-start-2/" rel="permalink">수영을 배우기 위한 준비 2편: 수영복 </a></h2><p class="archive__item-excerpt" itemprop="description">이번 포스팅에서는 수영을 배울 때 어떤 것이 필요한지 말씀드리려고 합니다. 사실 수영 초보자가 처음 수영을 하려고 할 때 많이 고민이 되는 것이거든요. 자주 써보지도 않은 것이고, 사 본 적도 거의 없는 물건들인데 어떻게 골라야 할지 잘 모르는 건 당연하겠죠.</p></article></div></div></div></div></div><div id="footer" class="page__footer"><footer><div class="page__footer-copyright">&copy; 2019 chobolife. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div></footer></div><script src="/assets/js/main.min.js"></script> <script src="https://kit.fontawesome.com/4eee35f757.js"></script> <script> var disqus_config = function () { this.page.url = "https://chobolife.github.io/blog/2019/08/06/ec2-web-server/"; this.page.identifier = "/blog/2019/08/06/ec2-web-server"; }; (function() { var d = document, s = d.createElement('script'); s.src = 'https://chobolife.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
