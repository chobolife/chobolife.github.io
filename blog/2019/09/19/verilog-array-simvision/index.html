<!doctype html> <!-- Minimal Mistakes Jekyll Theme 4.16.5 by Michael Rose Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes Free for personal and commercial use under the MIT license https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE --><html lang="ko" class="no-js"><meta charset="utf-8"><title>Verilog에서 사용한 배열을 simvision에서 확인하기 - 우당탕탕 초보라이프</title><meta name="description" content="전통적인 배열 사용 방법Verilog로 코드를 짜다보면 가끔 2차원 배열을 사용하고 싶을 때가 있다.거의 대부분은 2차원 배열을 아래와 같이 선언한다.아래 코드는 32-bit wire를 1024개짜리의 배열로 선언하고 사용하는 코드이다."><meta property="og:type" content="article"><meta property="og:locale" content="ko"><meta property="og:site_name" content="우당탕탕 초보라이프"><meta property="og:title" content="Verilog에서 사용한 배열을 simvision에서 확인하기"><meta property="og:url" content="https://chobolife.github.io/blog/2019/09/19/verilog-array-simvision/"><meta property="og:description" content="전통적인 배열 사용 방법Verilog로 코드를 짜다보면 가끔 2차원 배열을 사용하고 싶을 때가 있다.거의 대부분은 2차원 배열을 아래와 같이 선언한다.아래 코드는 32-bit wire를 1024개짜리의 배열로 선언하고 사용하는 코드이다."><meta property="article:published_time" content="2019-09-19T16:30:00+09:00"><link rel="canonical" href="https://chobolife.github.io/blog/2019/09/19/verilog-array-simvision/"> <script type="application/ld+json"> { "@context": "https://schema.org", "@type": "Person", "name": "chobolife", "url": "https://chobolife.github.io", "sameAs": null } </script><link href="/feed.xml" type="application/atom+xml" rel="alternate" title="우당탕탕 초보라이프 Feed"><meta name="viewport" content="width=device-width, initial-scale=1.0"> <script> document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js '; </script><link rel="stylesheet" href="/assets/css/main.css"> <!--[if IE ]><style> /* old IE unsupported flexbox fixes */ .greedy-nav .site-title { padding-right: 3em; } .greedy-nav button { position: absolute; top: 0; right: 0; height: 100%; }</style><![endif]--><body class="layout--single"><nav class="skip-links"><h2 class="screen-reader-text">Skip links</h2><ul><li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a><li><a href="#main" class="screen-reader-shortcut">Skip to content</a><li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></ul></nav><!--[if lt IE 9]><div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]--><div class="masthead"><div class="masthead__inner-wrap"><div class="masthead__menu"><nav id="site-nav" class="greedy-nav"> <a class="site-title" href="/"> 우당탕탕 초보라이프 </a><ul class="visible-links"><li class="masthead__menu-item"> <a href="/tags/" >Tags</a><li class="masthead__menu-item"> <a href="/about/" >About</a></ul><button class="greedy-nav__toggle hidden" type="button"> <span class="visually-hidden">토글 메뉴</span><div class="navicon"></div></button><ul class="hidden-links hidden"></ul></nav></div></div></div><div class="initial-content"><div id="main" role="main"><article class="page" itemscope itemtype="https://schema.org/CreativeWork"><meta itemprop="headline" content="Verilog에서 사용한 배열을 simvision에서 확인하기"><meta itemprop="description" content="전통적인 배열 사용 방법Verilog로 코드를 짜다보면 가끔 2차원 배열을 사용하고 싶을 때가 있다.거의 대부분은 2차원 배열을 아래와 같이 선언한다.아래 코드는 32-bit wire를 1024개짜리의 배열로 선언하고 사용하는 코드이다."><meta itemprop="datePublished" content="September 19, 2019"><div class="page__inner-wrap"><header><h1 id="page-title" class="page__title" itemprop="headline">Verilog에서 사용한 배열을 simvision에서 확인하기</h1></header><section class="page__content" itemprop="text"><h2 id="전통적인-배열-사용-방법">전통적인 배열 사용 방법</h2><p>Verilog로 코드를 짜다보면 가끔 2차원 배열을 사용하고 싶을 때가 있다. 거의 대부분은 2차원 배열을 아래와 같이 선언한다. 아래 코드는 32-bit wire를 1024개짜리의 배열로 선언하고 사용하는 코드이다.</p><div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">wire</span> <span class="p">[</span><span class="mi">31</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">x_array</span> <span class="p">[</span><span class="mi">0</span><span class="o">:</span><span class="mi">1023</span><span class="p">];</span>
<span class="k">assign</span> <span class="n">x_array</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">32'h01234567</span><span class="p">;</span>
<span class="k">assign</span> <span class="n">x_array</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">32'h12345678</span><span class="p">;</span>
<span class="k">assign</span> <span class="n">x_array</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">32'h23456789</span><span class="p">;</span>
<span class="p">...</span>
<span class="k">assign</span> <span class="n">x_array</span><span class="p">[</span><span class="mi">1023</span><span class="p">]</span> <span class="o">=</span> <span class="mh">32'h89abcdef</span><span class="p">;</span>
</code></pre></div></div><p><code class="highlighter-rouge">assign</code> 문은 그냥 참조하는 것을 보여주기 위해 예시로 쓴 것이니 무시해도 된다. 여기서 유심히 보아야 할 것은 선언하는 방법이지, 어떻게 접근하느냐 하는 것은 아니다.</p><p>위와 같이 사용하면 코드상의 문제는 없지만 코드를 짜는 단계에서 약간 불편함이 따른다. 그 이유는 simvision에서 <code class="highlighter-rouge">x_array</code>를 확인할 수 없기 때문이다. 코드를 짤 때는 수시로 의도대로 동작하는지 시뮬레이션해보고 결과를 확인하게 되는데, 변수의 값을 바로 볼 수 없다면 이것이 너무 불편해진다.</p><h2 id="우회하는-방법">우회하는 방법</h2><p>물론 방법은 있다. 배열이 아닌 일반 wire를 선언하여 배열 중에서 알고 싶은 부분을 빼면 된다. 예를 들면 뭐 이런 식으로…</p><div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">wire</span> <span class="p">[</span><span class="mi">31</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">x_check</span><span class="p">;</span>
<span class="k">assign</span> <span class="n">x_check</span> <span class="o">=</span> <span class="n">x_array</span><span class="p">[</span><span class="mi">512</span><span class="p">];</span>
</code></pre></div></div><p>확인해야 할 값이 하나라면 잠깐 쓸 수 있는 방법이긴 하지만, 여러 개이거나 수시로 변한다면 이것 또한 불편하기 그지없다. 처음에는 <code class="highlighter-rouge">x_array[0]</code> 봤다가 언제는 <code class="highlighter-rouge">x_array[8]</code> 확인했다가 또 <code class="highlighter-rouge">x_array[256]</code> 봤다가… 이래야 한다면? 상상만 해도 끔찍하다.</p><h2 id="해결방법">해결방법</h2><p>이것을 근본적으로 그리고 아주 간단하게 해결할 수 있는 방법이 있다. 아래와 같이 하면 된다.</p><div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">wire</span> <span class="p">[</span><span class="mi">0</span><span class="o">:</span><span class="mi">1023</span><span class="p">][</span><span class="mi">31</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">x_array</span><span class="p">;</span>
<span class="k">assign</span> <span class="n">x_array</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">32'h01234567</span><span class="p">;</span>
<span class="k">assign</span> <span class="n">x_array</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">32'h12345678</span><span class="p">;</span>
<span class="k">assign</span> <span class="n">x_array</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">32'h23456789</span><span class="p">;</span>
<span class="p">...</span>
<span class="k">assign</span> <span class="n">x_array</span><span class="p">[</span><span class="mi">1023</span><span class="p">]</span> <span class="o">=</span> <span class="mh">32'h89abcdef</span><span class="p">;</span>
</code></pre></div></div><p>위에 있던 코드와 비교하자면 바뀐 것은 <code class="highlighter-rouge">x_array</code>를 선언하는 부분밖에 없다. <code class="highlighter-rouge">x_array</code>를 참조하여 사용하는 부분은 완전히 동일하다. 심지어 위 코드에는 포함하지 않았지만 <code class="highlighter-rouge">x_array[256][0]</code>과 같이 bit 단위로 접근할 수 있는 방법까지도 동일하다. 이렇게 선언한 변수는 simvision에서 확인할 수 있다.</p><figure> <img src="https://drive.google.com/uc?id=1uQXC1e_feAEqt3j4wStRLzAisDiwSppU" alt="Verilog에서 사용하고 있는 배열을 simvision에서 확인하는 모습이다." title="simvision에서 Verilog의 2차원 배열을 확인" style="border:1px solid #ccc0bd; " /><figcaption>Verilog에서 사용하고 있는 배열을 simvision에서 확인하는 모습이다.</figcaption></figure><p>배열의 각 원소는 일반적인 신호들과 마찬가지로 bit를 풀어서 각 bit의 값을 관찰할 수도 있다. 위 그림에서 <code class="highlighter-rouge">x_array[0]</code>, <code class="highlighter-rouge">x_array[1]</code> 등 각 원소의 앞에 + 기호가 있는 것을 클릭하면 된다.</p><p>놀랍지 않은가? <strong>그런데 이 방법은 합성이 불가능할 수 있다.</strong> 툴의 버전에 따라 다른지, 어떤 옵션이 필요한지 등에 대한 것은 파악하지 못했다. 위와 같은 방법은 일단 ncsim에서는 먹히는 방법이다. 그렇다면 아마 Cadence의 툴에서는 모두 될 것 같다. 그런데 이와 같은 array의 선언 방법이 verilog의 standard에는 정의되지 않은 방법이다. (참고: <a href="https://www.eg.bucknell.edu/~csci320/2016-fall/wp-content/uploads/2015/08/verilog-std-1364-2005.pdf">Verilog-2005 standard PDF</a>) 따라서 Cadence가 아닌 다른 툴에서는 제대로 인식되지 않을 수 있다.</p><p>만약에 합성할 때 문제가 생긴다면 다시 아래와 같이 선언부를 바꾸어야 할 것이다.</p><div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">wire</span> <span class="p">[</span><span class="mi">31</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">x_array</span> <span class="p">[</span><span class="mi">0</span><span class="o">:</span><span class="mi">1023</span><span class="p">];</span>
</code></pre></div></div><p>하지만 적어도 코드를 짜고 기능을 검증하는 단계에서만이라도 2차원 배열의 값을 확인할 수 있다면 개발이 매우 윤택해질 수 있다. 그리고 만약 합성에 문제가 있어서 선언부를 바꾸어야 할 일이 생긴다고 하더라도, 개발 과정에서 우리가 덜 수 있는 불편함에 비해서 이것은 그다지 많은 작업량을 요구하지도 않는 쉬운 일이다.</p><h2 id="3차원-배열의-경우">3차원 배열의 경우</h2><p>3차원 배열은 사용해 본 적이 없었는데 이 포스팅을 쓰면서 궁금해져서 한 번 확인해 보았다.</p><div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">wire</span> <span class="p">[</span><span class="mi">0</span><span class="o">:</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="o">:</span><span class="mi">2</span><span class="p">][</span><span class="mi">31</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">y_array</span><span class="p">;</span>
<span class="k">assign</span> <span class="n">y_array</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">32'h1</span><span class="p">;</span>
<span class="k">assign</span> <span class="n">y_array</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">32'h2</span><span class="p">;</span>
<span class="k">assign</span> <span class="n">y_array</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">32'h3</span><span class="p">;</span>
<span class="k">assign</span> <span class="n">y_array</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">32'h4</span><span class="p">;</span>
<span class="k">assign</span> <span class="n">y_array</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">32'h5</span><span class="p">;</span>
<span class="k">assign</span> <span class="n">y_array</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">32'h6</span><span class="p">;</span>
</code></pre></div></div><p>위와 같은 코드를 작성하고 실행한 후 simvision으로 보면 아래와 같다.</p><figure> <img src="https://drive.google.com/uc?id=1RSujWC5uHX2LXIoyDhxopqW0bcYXu1q7" alt="3차원 배열도 마찬가지로 simvision에서 값을 확인할 수 있다." title="simvision에서 Verilog의 3차원 배열을 확인" style="border:1px solid #ccc0bd; " /><figcaption>3차원 배열도 마찬가지로 simvision에서 값을 확인할 수 있다.</figcaption></figure></section><footer class="page__meta"><p class="page__taxonomy"> <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> 태그: </strong> <span itemprop="keywords"> <a href="/tags/#array" class="page__taxonomy-item" rel="tag">array</a><span class="sep">, </span> <a href="/tags/#simvision" class="page__taxonomy-item" rel="tag">simvision</a><span class="sep">, </span> <a href="/tags/#verilog" class="page__taxonomy-item" rel="tag">Verilog</a><span class="sep">, </span> <a href="/tags/#%EB%B0%B0%EC%97%B4" class="page__taxonomy-item" rel="tag">배열</a><span class="sep">, </span> <a href="/tags/#%EB%B2%A0%EB%A6%B4%EB%A1%9C%EA%B7%B8" class="page__taxonomy-item" rel="tag">베릴로그</a><span class="sep">, </span> <a href="/tags/#%EC%BD%94%EB%94%A9" class="page__taxonomy-item" rel="tag">코딩</a> </span></p><p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 업데이트:</strong> <time datetime="2019-09-19T16:30:00+09:00">September 19, 2019</time></p></footer><nav class="pagination"> <a href="/blog/2019/08/29/swim-start-2/" class="pagination--pager" title="수영을 배우기 위한 준비 2편: 수영복 ">이전</a> <a href="/blog/2019/09/27/swim-myth-1/" class="pagination--pager" title="수영 고정관념 1편: 수영은 관절에 무조건 좋을까? ">다음</a></nav></div><div class="page__comments"><h4 class="page__comments-title">댓글남기기</h4><section id="disqus_thread"></section></div></article><div class="page__related"><h4 class="page__related-title">참고</h4><div class="grid__wrapper"><div class="grid__item"><article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"><h2 class="archive__item-title" itemprop="headline"> <a href="/blog/2019/09/28/bundang-olympic/" rel="permalink">수영장 정보: 분당올림픽스포츠센터 </a></h2><p class="archive__item-excerpt" itemprop="description">안녕하세요. 오늘은 분당올림픽스포츠센터의 브로셔를 공유하고 정보를 알려드리려고 합니다. 각 프로그램의 시간, 요일, 수강료, 수강대상 등의 정보가 있습니다. 브로셔 전체의 pdf 파일은 이 포스트 제일 하단에 있습니다.</p></article></div><div class="grid__item"><article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"><h2 class="archive__item-title" itemprop="headline"> <a href="/blog/2019/09/27/swim-myth-1/" rel="permalink">수영 고정관념 1편: 수영은 관절에 무조건 좋을까? </a></h2><p class="archive__item-excerpt" itemprop="description">오늘의 주제는 이것입니다. 정말 수영은 관절에 무조건 좋을까?</p></article></div><div class="grid__item"><article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"><h2 class="archive__item-title" itemprop="headline"> <a href="/blog/2019/08/29/swim-start-2/" rel="permalink">수영을 배우기 위한 준비 2편: 수영복 </a></h2><p class="archive__item-excerpt" itemprop="description">이번 포스팅에서는 수영을 배울 때 어떤 것이 필요한지 말씀드리려고 합니다. 사실 수영 초보자가 처음 수영을 하려고 할 때 많이 고민이 되는 것이거든요. 자주 써보지도 않은 것이고, 사 본 적도 거의 없는 물건들인데 어떻게 골라야 할지 잘 모르는 건 당연하겠죠.</p></article></div><div class="grid__item"><article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"><h2 class="archive__item-title" itemprop="headline"> <a href="/blog/2019/08/20/swim-start-1/" rel="permalink">수영을 배우기 위한 준비 1편: 시간, 장소 </a></h2><p class="archive__item-excerpt" itemprop="description">수영 강습을 한 번도 받아본 적이 없지만 수영을 배우기 위해 고민을 하고 있는 사람이라면 이 포스팅이 도움이 될 것 같습니다. 제가 그 때 했던 고민을 떠올리면서 써 보려고 하거든요.</p></article></div></div></div></div></div><div id="footer" class="page__footer"><footer><div class="page__footer-copyright">&copy; 2019 chobolife. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div></footer></div><script src="/assets/js/main.min.js"></script> <script src="https://kit.fontawesome.com/4eee35f757.js"></script> <script> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-141049037-4']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script> <script> var disqus_config = function () { this.page.url = "https://chobolife.github.io/blog/2019/09/19/verilog-array-simvision/"; this.page.identifier = "/blog/2019/09/19/verilog-array-simvision"; }; (function() { var d = document, s = d.createElement('script'); s.src = 'https://chobolife.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
